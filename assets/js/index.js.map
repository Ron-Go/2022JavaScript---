{"version":3,"file":"index.js","names":["productsData","productSelect","document","getElementsByClassName","productWrap","shoppingCartTable","productCard","dialog","getElementsByTagName","discardBtn","cartDailog","form","querySelector","formInput","querySelectorAll","addEventListener","e","console","log","target","value","resultProduct","filter","item","category","renderProducts","preventDefault","textContent","id","dataset","addCartData","data","productId","quantity","addCart","getCarts","innerText","getAttribute","deleteProduct","deleteAllProduct","targetId","targetNum","patchData","patchCartProduct","inputValidate","type","objOrder","user","forEach","index","postOrder","undefined","length","innerHTML","str","images","title","price","origin_price","thousandths","renderCart","cartData","carts","tableStart","tableBody","finalTotal","product","tableEnd","numSelect","arrayPrice","toString","split","splice","join","select","Object","keys","validate","constraints","姓名","presence","message","minimum","電話","Email","email","寄送地址","errors","nextElementSibling","key","api","address","apiPath","token","axios","get","then","res","err","response","obj","post","jumpAlert","patch","reset","getProducts","result","products"],"sources":["index.js"],"sourcesContent":["let productsData = [];\n\n/*-----選擇器部分-----*/\n// 產品篩選<select>\nconst productSelect = document.getElementsByClassName('productSelect')[0];\n\n// 全部產品清單\nconst productWrap = document.getElementsByClassName('productWrap')[0];\n\n// 購物車區塊\nconst shoppingCartTable = document.getElementsByClassName('shoppingCart-table')[0];\n\n// 加入購物車\nconst productCard = document.getElementsByClassName('productCard');\n\n// 加入購物車Dialog\nconst dialog = document.getElementsByTagName(\"dialog\")[0];\n\n// 購物車單項清除\nconst discardBtn = {}; \n\n// 彈跳視窗\nconst cartDailog = document.getElementsByTagName('dialog')[0];\n\n// form區塊\nconst form = document.querySelector('.orderInfo-form');\n\n// form input collection\nconst formInput = document.querySelectorAll('.orderInfo-input');\n\n\n/*-----監聽部分-----*/\n\n// 產品篩選<select>\nproductSelect.addEventListener('change', (e) => {\n  console.log(e.target.value);\n  const resultProduct = productsData.filter(item => e.target.value === item.category || e.target.value === '');\n  renderProducts(resultProduct);\n});\n\n// 加入購物車\nproductWrap.addEventListener('click', (e) => {\n  e.preventDefault();\n  if (e.target.textContent !== '加入購物車') return;\n  const id = e.target.dataset.id;\n  const addCartData = { data: { productId: id, quantity: 1 } };\n  addCart(addCartData);\n  getCarts();\n});\n// e.preventDefault();\n// const productTitle = e.target.nextElementSibling.innerText;\n// console.log(productTitle);\n// const resultID = productsData.filter(item => productTitle === item.title)[0].id;\n// console.log(resultID);\n// const addCartData = { data: { productId: resultID, quantity: 1 } };\n// console.log(addCartData);\n// addCart(addCartData);\n// getCarts();\n\n// 購物車單項、全部清除\nshoppingCartTable.addEventListener('click', (e) => {\n  e.preventDefault(); \n  if (e.target.innerText !== 'clear' && e.target.innerText !== '刪除所有品項') return;\n  console.log(e.target.innerText);\n  const productId = e.target.getAttribute('data-id'); // 取得id\n  e.target.innerText === 'clear' ? deleteProduct(productId) : e.target.innerText === '刪除所有品項' ? deleteAllProduct() : ``;\n});\n\n// 修改購物車數量\nshoppingCartTable.addEventListener('change', (e) => {\n  if (e.target.value !== 0 && e.target.innerText === 'clear' && e.target.innerText === '刪除所有品項') return;\n  const targetId = e.target.getAttribute('data-id');\n  const targetNum = +e.target.value;\n  const patchData = { data: { id: targetId, quantity: targetNum } };\n  console.log(targetId, targetNum, patchData);\n  patchCartProduct(patchData);\n});\n\n// 送出訂單\nform.addEventListener('click', (e) => {\n  e.preventDefault();\n  // validate驗證表單輸入有異常，return跳出監聽\n  if (inputValidate('boolean')) return;\n  if (e.target.type === 'submit') {\n    let objOrder = { data: { user: {} } };\n    ['name', 'tel', 'email', 'address', 'payment'].forEach((item, index) => {\n      objOrder.data.user[item] = formInput[index].value;\n    });\n    postOrder(objOrder);\n  };\n})\n\n/*----- 渲染部分-----*/\n\n// 渲染產品\nfunction renderProducts(productsData) {\n  // 帶入參數為undefined，或帶入參數資料長度為0就return跳出\n  if (productsData === undefined || productsData.length === 0) {\n    productWrap.innerHTML = `<h1>無法取得商品資料</h1>`;\n    return;    \n  };\n  let str = '';\n  productsData.forEach(({category, images, title, price, origin_price, id} = item, index) => {\n    str += `<li class=\"productCard\">\n        <h4 class=\"productType\">${category}</h4>\n        <img src=\"${images}\" alt=\"img-${index}\">\n        <a href=\"#\" data-id=\"${id}\" class=\"addCardBtn\">加入購物車</a>\n        <h3>${title}</h3>\n        <del class=\"originPrice\">NT$${ thousandths(origin_price) }</del>\n        <p class=\"nowPrice\">NT$${ thousandths(price) }</p>\n      </li>`;\n    });\n  productWrap.innerHTML = str;\n};\n\n// 渲染購物車商品\nfunction renderCart(cartData) {\n  if (cartData === undefined) {\n    shoppingCartTable.innerHTML = `<h1>無法取得購物車資料</h1>`;\n    return;\n  } else if (cartData.carts.length === 0 ) {\n    shoppingCartTable.innerHTML = `<h1>購物車已清空</h1>`;\n    return;\n  };\n  // 購物車清單開頭\n  const tableStart = `<tr>\n          <th width=\"40%\">品項</th>\n          <th width=\"15%\">單價</th>\n          <th width=\"15%\">數量</th>\n          <th width=\"15%\">金額</th>\n          <th width=\"15%\"></th>\n        </tr>`;\n  let tableBody = '';\n  const { carts, finalTotal } = cartData;\n  // 跑forEach把購物車商品渲染出來\n  carts.forEach(({ product, quantity, id } = item, index) => {\n    // 購物車產品項目，樣板字面值累加forEach結果\n    tableBody += \n    `<tr>\n      <td>\n        <div class=\"cardItem-title\">\n          <img src=\"${ product.images}\" alt=\"cart-${index}\">\n          <p>${product.title}</p>\n        </div>\n      </td>\n      <td>NT$${thousandths(product.price)}</td>\n      <td>\n        <select name=\"\" class=\"numSelect\" id=\"numSelect\" value=\"${quantity}\" data-id=\"${id}\"> \n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n        </select>\n      </td>\n      <td>NT$${thousandths(product.price * quantity)}</td>\n      <td class=\"discardBtn\">\n        <a href=\"#\" class=\"material-icons\" data-num=\"${index}\" data-id=\"${id}\">clear</a>\n      </td>\n    </tr>`;\n  });\n  // 購物車清單結尾\n  const tableEnd = `<tr>\n          <td>\n            <a href=\"#\" class=\"discardAllBtn\">刪除所有品項</a>\n          </td>\n          <td></td>\n          <td></td>\n          <td>\n            <p>總金額</p>\n          </td>\n          <td>NT$${thousandths(finalTotal)}</td>\n        </tr>`;\n  shoppingCartTable.innerHTML = tableStart + tableBody + tableEnd;\n  // 購物車渲染完成後，選擇所有商品的數量<select>\n  const numSelect = document.querySelectorAll('.numSelect');\n  // forEach再把購物車資料內，每項商品數量賦予給數量<select>的value\n  carts.forEach(({ quantity } = item, index) => {\n    numSelect[index].value = quantity;\n  });\n};\n\n\n/*----- 其他部分-----*/\n\n// 千分位\nfunction thousandths(price) {\n  let arrayPrice = price.toString().split('');\n  if (arrayPrice.length < 4) return price;\n  if (arrayPrice.length >= 4) {\n    arrayPrice.splice(-3, 0, ',');\n    return arrayPrice.join('');\n  };\n};\n\n// 回傳validate驗證\n// 帶入參數'boolean'回傳true/false。\n// 帶入參數'obj'回傳validate的結果。\nfunction inputValidate(select) {\n  // 把validate的結果取key值，有key值回傳true，無key值回傳false\n  // validate的結果若沒回傳，用空物件取代避免 Object.keys()異常\n  const length = Object.keys(validate(form, constraints) || {}).length ? true : false;\n  return select === 'boolean' ? length : select === 'obj' ? validate(form, constraints) : false;\n};\n\n/*----- Validators 輸入驗證-----*/\nvar constraints = {\n  姓名: {\n    presence: {\n      message: \"是必填欄位\",\n    },\n    length: {\n      minimum: 2,\n      message: \"輸入至少2個字\",\n    },\n  },\n  電話: {\n    presence: {\n      message: \"是必填欄位\",\n    },\n    length: {\n      minimum: 8,\n      message: \"號碼需超過 8 碼\",\n    },\n  },\n  Email: {\n    presence: {\n      message: \"是必填欄位\",\n    },\n    email: {\n      message: \"格式有誤\",\n    },\n  },\n  寄送地址: {\n    presence: {\n      message: \"是必填欄位\",\n    },\n  },\n};\n\nformInput.forEach(item => {\n  item.addEventListener('blur', (e) => {\n    // validate的結果賦予給變數errors\n    let errors = inputValidate('obj');\n    item.nextElementSibling.textContent = '';\n    // 若errors無資料，return跳出\n    if (!errors) return;  \n    Object.keys(errors).forEach(key => {\n      // 選擇器選取(data-message)屬性，及屬性值（errors的key值\n      // 並賦予errors對應key值的值\n      document.querySelector(`[data-message=\"${key}\"]`).textContent = errors[key];\n    });\n  })\n});\n/*----- API部分-----*/\n\n// API資訊\nconst api = {\n  address: 'https://livejs-api.hexschool.io/api/livejs/v1',\n  apiPath: 'ron812',\n  token: 'cFphZ0CBhIMnEIvowFRtlwNKvso1',\n};\n\n// 從API取得購物車資訊\nfunction getCarts() {\n  const { address, apiPath } = api;\n  return axios.get(`${address}/customer/${apiPath}/carts`)\n    .then((res) => {\n      renderCart(res.data);\n    })\n    .catch((err) => {\n      console.log(err.response.data.message);\n    });\n};\n\n// 增加到購物車\nfunction addCart(obj) {\n  const { address, apiPath } = api;\n  axios.post(`${address}/customer/${apiPath}/carts`, obj)\n    .then((res) => {\n      renderCart(res.data);\n      jumpAlert('已加入購物車', 'success');\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\n// 刪除購物車單項產品\nfunction deleteProduct(id) {\n  const { address, apiPath } = api;\n  axios.delete(`${address}/customer/${apiPath}/carts/${id}`)\n    .then((res) => {\n      renderCart(res.data);\n      jumpAlert('已刪除', 'warning');\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\n// 刪除購物車全部產品\nfunction deleteAllProduct() {\n  const { address, apiPath } = api;\n  axios.delete(`${address}/customer/${apiPath}/carts`)\n    .then((res) => {\n      console.log(res.data);\n      renderCart(res.data);\n      jumpAlert(res.data.message, 'warning');\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\n// 購物車商品數量修改\nfunction patchCartProduct(obj) {\n  const { address, apiPath } = api;\n  axios.patch(`${address}/customer/${apiPath}/carts`, obj)\n    .then((res) => {\n      console.log(res.data);\n      renderCart(res.data)\n      jumpAlert('商品數量修改完成', 'success');\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\n// 送出訂單\nfunction postOrder(obj) {\n  const { address, apiPath } = api;\n  axios.post(`${address}/customer/${apiPath}/orders`, obj)\n    .then((res) => {\n      console.log(res);\n      console.log(res.data);\n      // 清除表單input\n      form.reset();\n      // 取得購物車資料，並渲染\n      getCarts();\n      jumpAlert('訂單送出完成', 'success');\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\n\n\n// init\n(async () => {\n  const { address, apiPath } = api;\n  try {\n    const getProducts = await axios.get(`${address}/customer/${apiPath}/products`);\n    const { data: result } = getProducts;\n    productsData = result?.products;\n    renderProducts(productsData);\n    await getCarts();\n  } catch (error) {\n    throw (error);\n  }\n})();"],"mappings":";;;+CACA;AAAA;AAAA;AADA,IAAIA,YAAY,GAAG,EAAE;;AAErB;AACA;AACA,IAAMC,aAAa,GAAGC,QAAQ,CAACC,sBAAsB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;;AAEzE;AACA,IAAMC,WAAW,GAAGF,QAAQ,CAACC,sBAAsB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;;AAErE;AACA,IAAME,iBAAiB,GAAGH,QAAQ,CAACC,sBAAsB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;;AAElF;AACA,IAAMG,WAAW,GAAGJ,QAAQ,CAACC,sBAAsB,CAAC,aAAa,CAAC;;AAElE;AACA,IAAMI,MAAM,GAAGL,QAAQ,CAACM,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;AAEzD;AACA,IAAMC,UAAU,GAAG,CAAC,CAAC;;AAErB;AACA,IAAMC,UAAU,GAAGR,QAAQ,CAACM,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;AAE7D;AACA,IAAMG,IAAI,GAAGT,QAAQ,CAACU,aAAa,CAAC,iBAAiB,CAAC;;AAEtD;AACA,IAAMC,SAAS,GAAGX,QAAQ,CAACY,gBAAgB,CAAC,kBAAkB,CAAC;;AAG/D;;AAEA;AACAb,aAAa,CAACc,gBAAgB,CAAC,QAAQ,EAAE,UAACC,CAAC,EAAK;EAC9CC,OAAO,CAACC,GAAG,CAACF,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC;EAC3B,IAAMC,aAAa,GAAGrB,YAAY,CAACsB,MAAM,CAAC,UAAAC,IAAI;IAAA,OAAIP,CAAC,CAACG,MAAM,CAACC,KAAK,KAAKG,IAAI,CAACC,QAAQ,IAAIR,CAAC,CAACG,MAAM,CAACC,KAAK,KAAK,EAAE;EAAA,EAAC;EAC5GK,cAAc,CAACJ,aAAa,CAAC;AAC/B,CAAC,CAAC;;AAEF;AACAjB,WAAW,CAACW,gBAAgB,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;EAC3CA,CAAC,CAACU,cAAc,EAAE;EAClB,IAAIV,CAAC,CAACG,MAAM,CAACQ,WAAW,KAAK,OAAO,EAAE;EACtC,IAAMC,EAAE,GAAGZ,CAAC,CAACG,MAAM,CAACU,OAAO,CAACD,EAAE;EAC9B,IAAME,WAAW,GAAG;IAAEC,IAAI,EAAE;MAAEC,SAAS,EAAEJ,EAAE;MAAEK,QAAQ,EAAE;IAAE;EAAE,CAAC;EAC5DC,OAAO,CAACJ,WAAW,CAAC;EACpBK,QAAQ,EAAE;AACZ,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA9B,iBAAiB,CAACU,gBAAgB,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;EACjDA,CAAC,CAACU,cAAc,EAAE;EAClB,IAAIV,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,OAAO,IAAIpB,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,QAAQ,EAAE;EACvEnB,OAAO,CAACC,GAAG,CAACF,CAAC,CAACG,MAAM,CAACiB,SAAS,CAAC;EAC/B,IAAMJ,SAAS,GAAGhB,CAAC,CAACG,MAAM,CAACkB,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;EACpDrB,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,OAAO,GAAGE,aAAa,CAACN,SAAS,CAAC,GAAGhB,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,QAAQ,GAAGG,gBAAgB,EAAE,KAAK;AACvH,CAAC,CAAC;;AAEF;AACAlC,iBAAiB,CAACU,gBAAgB,CAAC,QAAQ,EAAE,UAACC,CAAC,EAAK;EAClD,IAAIA,CAAC,CAACG,MAAM,CAACC,KAAK,KAAK,CAAC,IAAIJ,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,OAAO,IAAIpB,CAAC,CAACG,MAAM,CAACiB,SAAS,KAAK,QAAQ,EAAE;EAC/F,IAAMI,QAAQ,GAAGxB,CAAC,CAACG,MAAM,CAACkB,YAAY,CAAC,SAAS,CAAC;EACjD,IAAMI,SAAS,GAAG,CAACzB,CAAC,CAACG,MAAM,CAACC,KAAK;EACjC,IAAMsB,SAAS,GAAG;IAAEX,IAAI,EAAE;MAAEH,EAAE,EAAEY,QAAQ;MAAEP,QAAQ,EAAEQ;IAAU;EAAE,CAAC;EACjExB,OAAO,CAACC,GAAG,CAACsB,QAAQ,EAAEC,SAAS,EAAEC,SAAS,CAAC;EAC3CC,gBAAgB,CAACD,SAAS,CAAC;AAC7B,CAAC,CAAC;;AAEF;AACA/B,IAAI,CAACI,gBAAgB,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;EACpCA,CAAC,CAACU,cAAc,EAAE;EAClB;EACA,IAAIkB,aAAa,CAAC,SAAS,CAAC,EAAE;EAC9B,IAAI5B,CAAC,CAACG,MAAM,CAAC0B,IAAI,KAAK,QAAQ,EAAE;IAC9B,IAAIC,QAAQ,GAAG;MAAEf,IAAI,EAAE;QAAEgB,IAAI,EAAE,CAAC;MAAE;IAAE,CAAC;IACrC,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,CAAC,CAACC,OAAO,CAAC,UAACzB,IAAI,EAAE0B,KAAK,EAAK;MACtEH,QAAQ,CAACf,IAAI,CAACgB,IAAI,CAACxB,IAAI,CAAC,GAAGV,SAAS,CAACoC,KAAK,CAAC,CAAC7B,KAAK;IACnD,CAAC,CAAC;IACF8B,SAAS,CAACJ,QAAQ,CAAC;EACrB;EAAC;AACH,CAAC,CAAC;;AAEF;;AAEA;AACA,SAASrB,cAAc,CAACzB,YAAY,EAAE;EACpC;EACA,IAAIA,YAAY,KAAKmD,SAAS,IAAInD,YAAY,CAACoD,MAAM,KAAK,CAAC,EAAE;IAC3DhD,WAAW,CAACiD,SAAS,8DAAsB;IAC3C;EACF;EAAC;EACD,IAAIC,GAAG,GAAG,EAAE;EACZtD,YAAY,CAACgD,OAAO,CAAC,YAAsE;IAAA,+EAAhBzB,IAAI;MAAxDC,QAAQ,QAARA,QAAQ;MAAE+B,MAAM,QAANA,MAAM;MAAEC,KAAK,QAALA,KAAK;MAAEC,KAAK,QAALA,KAAK;MAAEC,YAAY,QAAZA,YAAY;MAAE9B,EAAE,QAAFA,EAAE;IAAA,IAAUqB,KAAK;IACpFK,GAAG,4EAC2B9B,QAAQ,uCACtB+B,MAAM,0BAAcN,KAAK,kDACdrB,EAAE,qFACnB4B,KAAK,0DACoBG,WAAW,CAACD,YAAY,CAAC,sDAC9BC,WAAW,CAACF,KAAK,CAAC,sBACxC;EACR,CAAC,CAAC;EACJrD,WAAW,CAACiD,SAAS,GAAGC,GAAG;AAC7B;AAAC;;AAED;AACA,SAASM,UAAU,CAACC,QAAQ,EAAE;EAC5B,IAAIA,QAAQ,KAAKV,SAAS,EAAE;IAC1B9C,iBAAiB,CAACgD,SAAS,oEAAuB;IAClD;EACF,CAAC,MAAM,IAAIQ,QAAQ,CAACC,KAAK,CAACV,MAAM,KAAK,CAAC,EAAG;IACvC/C,iBAAiB,CAACgD,SAAS,kDAAoB;IAC/C;EACF;EAAC;EACD;EACA,IAAMU,UAAU,uPAMJ;EACZ,IAAIC,SAAS,GAAG,EAAE;EAClB,IAAQF,KAAK,GAAiBD,QAAQ,CAA9BC,KAAK;IAAEG,UAAU,GAAKJ,QAAQ,CAAvBI,UAAU;EACzB;EACAH,KAAK,CAACd,OAAO,CAAC,YAA6C;IAAA,gFAAhBzB,IAAI;MAA9B2C,OAAO,SAAPA,OAAO;MAAEjC,QAAQ,SAARA,QAAQ;MAAEL,EAAE,SAAFA,EAAE;IAAA,IAAWqB,KAAK;IACpD;IACAe,SAAS,6FAIUE,OAAO,CAACX,MAAM,2BAAeN,KAAK,+BAC1CiB,OAAO,CAACV,KAAK,6DAGbG,WAAW,CAACO,OAAO,CAACT,KAAK,CAAC,uGAEyBxB,QAAQ,0BAAcL,EAAE,kRAQ3E+B,WAAW,CAACO,OAAO,CAACT,KAAK,GAAGxB,QAAQ,CAAC,+GAEGgB,KAAK,0BAAcrB,EAAE,yCAElE;EACR,CAAC,CAAC;EACF;EACA,IAAMuC,QAAQ,mRASGR,WAAW,CAACM,UAAU,CAAC,yBAC5B;EACZ5D,iBAAiB,CAACgD,SAAS,GAAGU,UAAU,GAAGC,SAAS,GAAGG,QAAQ;EAC/D;EACA,IAAMC,SAAS,GAAGlE,QAAQ,CAACY,gBAAgB,CAAC,YAAY,CAAC;EACzD;EACAgD,KAAK,CAACd,OAAO,CAAC,YAAgC;IAAA,gFAAhBzB,IAAI;MAAjBU,QAAQ,SAARA,QAAQ;IAAA,IAAWgB,KAAK;IACvCmB,SAAS,CAACnB,KAAK,CAAC,CAAC7B,KAAK,GAAGa,QAAQ;EACnC,CAAC,CAAC;AACJ;AAAC;;AAGD;;AAEA;AACA,SAAS0B,WAAW,CAACF,KAAK,EAAE;EAC1B,IAAIY,UAAU,GAAGZ,KAAK,CAACa,QAAQ,EAAE,CAACC,KAAK,CAAC,EAAE,CAAC;EAC3C,IAAIF,UAAU,CAACjB,MAAM,GAAG,CAAC,EAAE,OAAOK,KAAK;EACvC,IAAIY,UAAU,CAACjB,MAAM,IAAI,CAAC,EAAE;IAC1BiB,UAAU,CAACG,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC;IAC7B,OAAOH,UAAU,CAACI,IAAI,CAAC,EAAE,CAAC;EAC5B;EAAC;AACH;AAAC;;AAED;AACA;AACA;AACA,SAAS7B,aAAa,CAAC8B,MAAM,EAAE;EAC7B;EACA;EACA,IAAMtB,MAAM,GAAGuB,MAAM,CAACC,IAAI,CAACC,QAAQ,CAAClE,IAAI,EAAEmE,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC1B,MAAM,GAAG,IAAI,GAAG,KAAK;EACnF,OAAOsB,MAAM,KAAK,SAAS,GAAGtB,MAAM,GAAGsB,MAAM,KAAK,KAAK,GAAGG,QAAQ,CAAClE,IAAI,EAAEmE,WAAW,CAAC,GAAG,KAAK;AAC/F;AAAC;;AAED;AACA,IAAIA,WAAW,GAAG;EAChBC,EAAE,EAAE;IACFC,QAAQ,EAAE;MACRC,OAAO,EAAE;IACX,CAAC;IACD7B,MAAM,EAAE;MACN8B,OAAO,EAAE,CAAC;MACVD,OAAO,EAAE;IACX;EACF,CAAC;EACDE,EAAE,EAAE;IACFH,QAAQ,EAAE;MACRC,OAAO,EAAE;IACX,CAAC;IACD7B,MAAM,EAAE;MACN8B,OAAO,EAAE,CAAC;MACVD,OAAO,EAAE;IACX;EACF,CAAC;EACDG,KAAK,EAAE;IACLJ,QAAQ,EAAE;MACRC,OAAO,EAAE;IACX,CAAC;IACDI,KAAK,EAAE;MACLJ,OAAO,EAAE;IACX;EACF,CAAC;EACDK,IAAI,EAAE;IACJN,QAAQ,EAAE;MACRC,OAAO,EAAE;IACX;EACF;AACF,CAAC;AAEDpE,SAAS,CAACmC,OAAO,CAAC,UAAAzB,IAAI,EAAI;EACxBA,IAAI,CAACR,gBAAgB,CAAC,MAAM,EAAE,UAACC,CAAC,EAAK;IACnC;IACA,IAAIuE,MAAM,GAAG3C,aAAa,CAAC,KAAK,CAAC;IACjCrB,IAAI,CAACiE,kBAAkB,CAAC7D,WAAW,GAAG,EAAE;IACxC;IACA,IAAI,CAAC4D,MAAM,EAAE;IACbZ,MAAM,CAACC,IAAI,CAACW,MAAM,CAAC,CAACvC,OAAO,CAAC,UAAAyC,GAAG,EAAI;MACjC;MACA;MACAvF,QAAQ,CAACU,aAAa,2BAAmB6E,GAAG,SAAK,CAAC9D,WAAW,GAAG4D,MAAM,CAACE,GAAG,CAAC;IAC7E,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC;AACF;;AAEA;AACA,IAAMC,GAAG,GAAG;EACVC,OAAO,EAAE,+CAA+C;EACxDC,OAAO,EAAE,QAAQ;EACjBC,KAAK,EAAE;AACT,CAAC;;AAED;AACA,SAAS1D,QAAQ,GAAG;EAClB,IAAQwD,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxB,OAAOE,KAAK,CAACC,GAAG,WAAIJ,OAAO,uBAAaC,OAAO,YAAS,CACrDI,IAAI,CAAC,UAACC,GAAG,EAAK;IACbrC,UAAU,CAACqC,GAAG,CAAClE,IAAI,CAAC;EACtB,CAAC,CAAC,SACI,CAAC,UAACmE,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAACC,QAAQ,CAACpE,IAAI,CAACkD,OAAO,CAAC;EACxC,CAAC,CAAC;AACN;AAAC;;AAED;AACA,SAAS/C,OAAO,CAACkE,GAAG,EAAE;EACpB,IAAQT,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxBE,KAAK,CAACO,IAAI,WAAIV,OAAO,uBAAaC,OAAO,aAAUQ,GAAG,CAAC,CACpDJ,IAAI,CAAC,UAACC,GAAG,EAAK;IACbrC,UAAU,CAACqC,GAAG,CAAClE,IAAI,CAAC;IACpBuE,SAAS,CAAC,QAAQ,EAAE,SAAS,CAAC;EAChC,CAAC,CAAC,SACI,CAAC,UAACJ,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN;AAAC;;AAED;AACA,SAAS5D,aAAa,CAACV,EAAE,EAAE;EACzB,IAAQ+D,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxBE,KAAK,UAAO,WAAIH,OAAO,uBAAaC,OAAO,oBAAUhE,EAAE,EAAG,CACvDoE,IAAI,CAAC,UAACC,GAAG,EAAK;IACbrC,UAAU,CAACqC,GAAG,CAAClE,IAAI,CAAC;IACpBuE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC;EAC7B,CAAC,CAAC,SACI,CAAC,UAACJ,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN;AAAC;;AAED;AACA,SAAS3D,gBAAgB,GAAG;EAC1B,IAAQoD,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxBE,KAAK,UAAO,WAAIH,OAAO,uBAAaC,OAAO,YAAS,CACjDI,IAAI,CAAC,UAACC,GAAG,EAAK;IACbhF,OAAO,CAACC,GAAG,CAAC+E,GAAG,CAAClE,IAAI,CAAC;IACrB6B,UAAU,CAACqC,GAAG,CAAClE,IAAI,CAAC;IACpBuE,SAAS,CAACL,GAAG,CAAClE,IAAI,CAACkD,OAAO,EAAE,SAAS,CAAC;EACxC,CAAC,CAAC,SACI,CAAC,UAACiB,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN;AAAC;;AAED;AACA,SAASvD,gBAAgB,CAACyD,GAAG,EAAE;EAC7B,IAAQT,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxBE,KAAK,CAACS,KAAK,WAAIZ,OAAO,uBAAaC,OAAO,aAAUQ,GAAG,CAAC,CACrDJ,IAAI,CAAC,UAACC,GAAG,EAAK;IACbhF,OAAO,CAACC,GAAG,CAAC+E,GAAG,CAAClE,IAAI,CAAC;IACrB6B,UAAU,CAACqC,GAAG,CAAClE,IAAI,CAAC;IACpBuE,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC;EAClC,CAAC,CAAC,SACI,CAAC,UAACJ,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN;AAAC;;AAED;AACA,SAAShD,SAAS,CAACkD,GAAG,EAAE;EACtB,IAAQT,OAAO,GAAcD,GAAG,CAAxBC,OAAO;IAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;EACxBE,KAAK,CAACO,IAAI,WAAIV,OAAO,uBAAaC,OAAO,cAAWQ,GAAG,CAAC,CACrDJ,IAAI,CAAC,UAACC,GAAG,EAAK;IACbhF,OAAO,CAACC,GAAG,CAAC+E,GAAG,CAAC;IAChBhF,OAAO,CAACC,GAAG,CAAC+E,GAAG,CAAClE,IAAI,CAAC;IACrB;IACApB,IAAI,CAAC6F,KAAK,EAAE;IACZ;IACArE,QAAQ,EAAE;IACVmE,SAAS,CAAC,QAAQ,EAAE,SAAS,CAAC;EAChC,CAAC,CAAC,SACI,CAAC,UAACJ,GAAG,EAAK;IACdjF,OAAO,CAACC,GAAG,CAACgF,GAAG,CAAC;EAClB,CAAC,CAAC;AACN;AAAC;;AAID;AACA,2DAAC;EAAA;EAAA;IAAA;MAAA;QAAA;UACSP,OAAO,GAAcD,GAAG,CAAxBC,OAAO,EAAEC,OAAO,GAAKF,GAAG,CAAfE,OAAO;UAAA;UAAA;UAAA,OAEIE,KAAK,CAACC,GAAG,WAAIJ,OAAO,uBAAaC,OAAO,eAAY;QAAA;UAAxEa,WAAW;UACHC,MAAM,GAAKD,WAAW,CAA5B1E,IAAI;UACZ/B,YAAY,GAAG0G,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEC,QAAQ;UAC/BlF,cAAc,CAACzB,YAAY,CAAC;UAAC;UAAA,OACvBmC,QAAQ,EAAE;QAAA;UAAA;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAInB,IAAG"}